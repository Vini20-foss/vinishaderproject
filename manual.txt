Este √© o **Manual de Opera√ß√µes da Pipeline GRX **.

Este documento foi desenhado para voc√™, o operador da pipeline. Ele separa o que √© **Gosto Pessoal** (pode mexer √† vontade), o que √© **Ajuste Fino** (mexa com cuidado) e o que √© **Estrutural** (proibido mexer).

-----

se quiser usar direto no mpv por padr√£o vai no mpv.conf (dentro de /.config/mpv/) e adicione esses parametros
caso a pasta shaders n√£o exista s√≥ criar o diretorio com esse nome e colocar os arquivos de shader dentro dele

############
# Profiles #
############

# The options declared as part of profiles override global default settings,
# but only take effect when the profile is active.

# The following profile can be enabled on the command line with: --profile=eye-cancer

#[eye-cancer]
#sharpen=5

# Ativar o perfil sempre
profile=defaults

[defaults]
vo=gpu-next
gpu-api=opengl
opengl-es=yes
hwdec=auto-copy-safe
fbo-format=rgba32f
vf=format=rgba
video-output-levels=full
force-media-title=force_full_rgb
hdr-compute-peak=no
target-colorspace-hint=yes
scale=ewa_lanczos4sharpest
cscale=sinc
dscale=ewa_lanczos
tscale=sphinx
gamut-mapping-mode=linear
target-gamut=aces-ap0
target-trc=srgb
target-prim=aces-ap1
target-peak=1200
gpu-context=auto
gpu-shader-cache=yes
video-sync=display-resample
correct-downscaling=yes
sigmoid-upscaling=yes
linear-downscaling=yes
deband=no
interpolation=yes
dither-depth=auto
temporal-dither=yes
keep-open=yes
slang=por,br,pt
alang=eng,en,por,br,pt
save-position-on-quit
# Pipeline GRX
glsl-shaders=~~/.config/mpv/shaders/Analise.glsl
glsl-shaders=~~/.config/mpv/shaders/limpeza.glsl
glsl-shaders=~~/.config/mpv/shaders/restaura√ß√£o.glsl
glsl-shaders=~~/.config/mpv/shaders/upscale.glsl

# üìò Legenda de Risco

  * üü¢ **LIVRE:** Par√¢metros de gosto pessoal. Ajuste conforme sua tela ou prefer√™ncia.
  * üü° **CUIDADO:** Afeta a estabilidade. Valores extremos causam artefatos.
  * üî¥ **SISTEMA:** N√£o altere a menos que saiba *exatamente* como a matem√°tica interna funciona.

-----

# üß† Est√°gio 1 (S1): O Juiz (An√°lise)

*Arquivo: `Quantumanalisev46.glsl`*

> **Objetivo:** Este est√°gio n√£o muda a imagem, ele *olha* para ela. Alterar valores aqui muda a "opini√£o" da pipeline sobre o que √© borda, o que √© ru√≠do e o que √© movimento.

| Par√¢metro | Valor Padr√£o | Risco | O que faz? / Por que ajustar? |
| :--- | :---: | :---: | :--- |
| `MOTION_SENSITIVITY` | `1.2` | üü° | **Sensibilidade ao Movimento.**<br>**Aumentar:** Detecta movimentos menores, desliga o TAA mais cedo (menos ghosting, mais serrilhado).<br>**Diminuir:** Mant√©m TAA em movimentos r√°pidos (mais fluido, risco de rastro). |
| `EDGE_STRENGTH_FACTOR` | `1.5` | üü° | **Detec√ß√£o de Bordas.**<br>Afeta onde o S2/S4 aplicam Sharpening. Se sua imagem parecer "mole", aumente levemente para `1.6`. Se tiver halos, baixe para `1.3`. |
| `LOW_LIGHT_THRESHOLD` | `0.15` | üî¥ | **Ponto de Corte de Sombra.**<br>Define o que √© "Zona Abissal". Mexer aqui descalibra a prote√ß√£o de ru√≠do colorido nas sombras do S2. |
| `ENABLE_SAFETY_CHECKS` | `1` | üî¥ | **Trava de Seguran√ßa (NaN/Inf).**<br>**NUNCA DESLIGUE.** √â o que impede a tela de piscar branco se o v√≠deo vier corrompido. |

-----

# üõ°Ô∏è Est√°gio 2 (S2): O Cirurgi√£o (Limpeza)

*Arquivo: `Quantumprocessev46.glsl`*

> **Objetivo:** Limpar o "lixo" (compress√£o, blocos) antes que ele seja ampliado.

| Par√¢metro | Valor Padr√£o | Risco | O que faz? / Por que ajustar? |
| :--- | :---: | :---: | :--- |
| `ENABLE_ANIME_CHAOS_SOLVER` | `1` | üü¢ | **Modo Dragon Ball Z.**<br>**1 (ON):** Ativa a corre√ß√£o agressiva de tra√ßos quando detecta Anime. Vital para desenhos antigos.<br>**0 (OFF):** Desligue se estiver assistindo *Live Action* muito ruim e o detector estiver confundindo atores com desenhos. |
| `DENOISE_STRENGTH` | `0.85` | üü¢ | **For√ßa da Limpeza.**<br>**Baixar (0.5):** Se voc√™ gosta de ver o gr√£o original do filme.<br>**Aumentar (0.95):** Se voc√™ quer imagem "limpa" estilo TV moderna (efeito pl√°stico). |
| `DEBLOCK_STRENGTH` | `0.90` | üü° | **Quebra de Blocos.**<br>Combate o quadriculado de v√≠deos de baixa qualidade. N√£o aumente para `1.0` ou perder√° detalhes de texturas finas (roupas, asfalto). |
| `SHADOW_NUKE_LEVEL` | `0.12` | üî¥ | **Exterm√≠nio de Sombra.**<br>Abaixo deste n√≠vel de luz, o S2 "mata" detalhes para esconder ru√≠do. Alterar isso pode fazer sombras ficarem roxas ou cinzas lavadas. |

-----

# üé® Est√°gio 3 (S3): O Restaurador

*Arquivo: `Quantumprocessev45.glsl` (Integrado na l√≥gica)*

> **Nota:** O S3 geralmente opera com constantes internas baseadas na an√°lise do S1, mas seus efeitos s√£o vis√≠veis na *textura*.

  * **N√£o h√° `#define` cr√≠ticos para o usu√°rio aqui**, pois ele obedece aos mapas do S1. A "m√°gica" do S3 (Vibrance, Pele) √© autom√°tica. Se a cor da pele estiver estranha, o ajuste deve ser feito no **Tone Mapping do S4**, n√£o aqui.

-----

# üåü Est√°gio 4 (S4): O Maestro (Upscale & Sa√≠da)

*Arquivo: `Quantumupscalev46.glsl`*

> **Objetivo:** Dar o polimento final, aumentar a resolu√ß√£o e controlar as cores. **Aqui √© onde voc√™ far√° 90% dos seus ajustes.**

### üéõÔ∏è Controles de Imagem (Gosto Pessoal)

| Par√¢metro | Valor Padr√£o | Risco | O que faz? / Por que ajustar? |
| :--- | :---: | :---: | :--- |
| `UPSCALE_STRENGTH` | `0.65` | üü¢ | **Nitidez do Upscale.**<br>`0.0` = Bilinear (suave). `1.0` = Lanczos/Jinc afiado. Use `0.65` para equil√≠brio. |
| `SHARPNESS_LEVEL` | `0.60` | üü¢ | **Nitidez Final.**<br>Aumente para animes modernos. Diminua para filmes antigos com muito gr√£o. Acima de `0.8` cria halos brancos feios. |
| `FILM_LOOK_STRENGTH` | `0.35` | üü¢ | **Efeito Cinema.**<br>Adiciona gr√£o sint√©tico e imperfei√ß√£o org√¢nica. Se voc√™ odeia gr√£o e quer imagem "de vidro", coloque `0.0`. |
| `BRIGHTNESS_ADJUSTMENT` | `1.00` | üü¢ | **O "Yang" (Luz).**<br>Controla a expans√£o de luz. Se a imagem parecer escura, aumente. N√£o afeta o preto (shadows), apenas os brilhos. |
| `CONTRAST_ENHANCEMENT` | `0.65` | üü¢ | **O "Yin" (Profundidade).**<br>Aumenta a diferen√ßa entre claro e escuro. Valores altos d√£o "pop" na imagem, mas podem esmagar detalhes na sombra. |

### ‚öôÔ∏è Controles T√©cnicos (Cuidado\!)

| Par√¢metro | Valor Padr√£o | Risco | O que faz? / Por que ajustar? |
| :--- | :---: | :---: | :--- |
| `UPSCALE_FACTOR` | `2.0` | üü° | **Multiplicador de Tamanho.**<br>Geralmente `2.0` (1080p -\> 4K). Se voc√™ tem um monitor 1440p e v√≠deo 720p, mude conforme a matem√°tica da tela. **Impacto massivo na performance da GPU.** |
| `TAA_STRENGTH` | `0.95` | üü° | **Estabilidade Temporal.**<br>Reduz o serrilhado em movimento. Se notar "fantasmas" (ghosting) em jogos ou esportes, reduza para `0.5` ou `0.0`. |
| `MOTION_STABILITY` | `0.85` | üü° | **Toler√¢ncia do TAA.**<br>Define o qu√£o r√°pido algo deve se mover para o TAA desligar. Valores altos mant√™m o TAA ligado por mais tempo (mais fluido, mais risco de borrao). |

### üö´ Controles de Sistema (N√ÉO TOQUE)

| Par√¢metro | Valor | Risco | Motivo da Proibi√ß√£o |
| :--- | :---: | :---: | :--- |
| `OUTPUT_LINEAR_FOR_MPV` | `1` | üî¥ | **Formato de Cor.**<br>Se seu `mpv.conf` tem `--gamut-mapping-mode=linear`, isto **TEM** que ser `1`. Se mudar para `0`, as cores ficar√£o lavadas e erradas. |
| `GOLDEN_RATIO` | `1.618...` | üî¥ | **Matem√°tica √Åurea.**<br>Todas as espirais de amostragem e dither dependem disso. Alterar quebra a distribui√ß√£o de ru√≠do. |
| `LANCZOS_RADIUS_BASE` | `12.0` | üî¥ | **Kernel do Upscale.**<br>Mexer aqui destr√≥i a rela√ß√£o de performance/qualidade do algoritmo de Lanczos. |

-----

# üí° Resumo de Cen√°rios Comuns

**1. "Estou vendo Dragon Ball Z e as linhas est√£o fracas."**

  * V√° no **S2**: Garanta que `ENABLE_ANIME_CHAOS_SOLVER` est√° `1`.
  * V√° no **S4**: Aumente `SHARPNESS_LEVEL` para `0.8`.

**2. "Estou vendo um filme antigo e os rostos parecem de cera."**

  * V√° no **S2**: Reduza `DENOISE_STRENGTH` para `0.4`.
  * V√° no **S4**: Aumente `FILM_LOOK_STRENGTH` para `0.5` (reinjeta gr√£o "bom" para disfar√ßar a cera).

**3. "A imagem est√° piscando/tremendo em cenas de a√ß√£o."**

  * V√° no **S1**: Aumente `MOTION_SENSITIVITY` (torna o juiz mais estrito, desliga o temporal antes).
  * V√° no **S4**: Reduza `TAA_STRENGTH` para `0.0` temporariamente para testar.

**4. "As sombras est√£o cinzas, quero preto profundo."**

  * V√° no **S4**: Aumente `CONTRAST_ENHANCEMENT`. N√£o mexa no `SHADOW_NUKE` do S2 (isso destr√≥i dados, o contraste do S4 apenas ajusta a curva visualmente).
